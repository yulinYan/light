webpackJsonp([15],{ZtL4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Rnrl"),i=a.c,n={name:"LightRights",data:function(){return{show:{insertFeedback:!0},suggestTextarea:"",checkList:[],tel:"",sum:"",sendAjax:!1}},methods:{saveText:function(){var e=this;if(this.sendAjax)this.$message({type:"info",message:"正在提交，请稍后"});else if(""!=this.suggestTextarea){if(""!=this.tel&&!/^1[34578]\d{9}$/.test(this.tel)&&!/^([0-9]{3,5}-)?[0-9]{7,8}$/.test(this.tel))return void this.$message({type:"error",message:"联系方式有误"});var t="";switch(this.checkList[0]){case"报错":t=1;break;case"建议":t=2;break;case"其他":t=3}if(""==t)return void this.$message({type:"error",message:"请填写问题分类"});var s=new FormData;s.append("introduction",this.sum),s.append("type",t),s.append("info",this.suggestTextarea),s.append("phone",this.tel),s.append("state",0),this.sendAjax=!0,this.$root.Bus.$emit("showLoading",!0),function(e){return Object(a.b)(i+"rebackinfo/insertFeedback","post","application/x-www-form-urlencoded",e)}(s).then(function(t){e.sendAjax=!1,e.$root.Bus.$emit("showLoading",!1),"success"==t.resultCode?(s=null,e.$message({type:"success",message:"提交成功"}),e.clearText()):e.$message({type:"error",message:t.message})}).catch(function(){e.sendAjax=!1,e.$root.Bus.$emit("showLoading",!1)})}else this.$message({type:"error",message:"请提出您的建议(问题描述)"})},upgrade:function(e){this.checkList=[e[e.length-1]]},clearText:function(){this.suggestTextarea="",this.checkList=[],this.tel="",this.sum=""}},mounted:function(){}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"LightRights"},[s("div",{staticClass:"overview"},[e._m(0),e._v(" "),s("div",{staticClass:"suggest"},[s("div",{staticClass:"requireDiv"},[s("span",[e._v("问题分类：")]),e._v(" "),s("el-checkbox-group",{on:{change:e.upgrade},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"报错"}}),e._v(" "),s("el-checkbox",{attrs:{label:"建议"}}),e._v(" "),s("el-checkbox",{attrs:{label:"其他"}})],1)],1),e._v(" "),s("div",[s("span",{staticStyle:{margin:"30px 0 20px 0",display:"inline-block"}},[e._v("问题概述：")]),e._v(" "),s("el-input",{staticClass:"sum",attrs:{type:"textarea",resize:"none",rows:1},model:{value:e.sum,callback:function(t){e.sum=t},expression:"sum"}})],1),e._v(" "),s("span",{staticClass:"requireDiv",staticStyle:{margin:"25px 0 20px 0",display:"inline-block"}},[e._v("问题描述：")]),e._v(" "),s("el-input",{attrs:{type:"textarea",rows:10,resize:"none",placeholder:"提出您的建议…"},model:{value:e.suggestTextarea,callback:function(t){e.suggestTextarea=t},expression:"suggestTextarea"}}),e._v(" "),s("div",[s("span",{staticStyle:{"margin-top":"30px",display:"inline-block"}},[e._v("联系方式：")]),e._v(" "),s("el-input",{staticClass:"tel",attrs:{type:"textarea",resize:"none",rows:1,placeholder:"请输入手机或座机号码"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}})],1),e._v(" "),s("div",[s("button",{on:{click:e.clearText}},[e._v("清除")]),e.show.insertFeedback?s("button",{on:{click:e.saveText}},[e._v("保存")]):e._e()])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"header"},[t("span",[this._v("意见反馈")])])}]};var r=s("VU/8")(n,c,!1,function(e){s("uyzD")},null,null);t.default=r.exports},uyzD:function(e,t){}});